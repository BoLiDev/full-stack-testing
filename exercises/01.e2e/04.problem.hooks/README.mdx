# Test Hooks

👨‍💼 We have one more issue. If you go
to <InlineFile file="tests/e2e/search.test.ts" /> and uncomment the error
Kellie 🧝‍♂️ put in there for you, then try to run the test again and you'll get a
failure. That's fine, we can just delete the error right? But because of the
error, we never get around to deleting the user we created 😬

That's why it's better to do cleanup in test hooks. Test hooks are functions you
can use for setup (`before`) or cleanup (`after`). You can either have them run
before or after each test (`beforeEach` and `afterEach`) or before or after all
tests (`beforeAll` and `afterAll`).

Here's the API:

```ts
test.beforeAll(async ({ page }) => {
	// do something before all tests
})

test.afterAll(async ({ page }) => {
	// do something after all tests
})

test.beforeEach(async ({ page }) => {
	// do something before each test
})
test.afterEach(async ({ page }) => {
	// do something after each test
})
```

You can define these hooks anywhere in your test file and in any order. You can
also define multiple hooks of the same type.

<callout-info>
	I like to avoid using `test.beforeEach` for test setup generally because I
	find `setup` functions to be much more straightforward. But the
	`test.afterEach` hook is great for cleanup and I recommend it. We'll talk
	about setup functions later in the workshop, but you can read about them now
	in [Avoid Nesting when you're
	Testing](https://kentcdodds.com/blog/avoid-nesting-when-youre-testing).
</callout-info>

So, let's use the `test.afterEach` hook to delete the user we created. We'll
need to set up something to allow us to keep track of the user we created.
Kody 🐨 will show you how.

- [📜 Playwright `test.beforeEach`](https://playwright.dev/docs/api/class-test#test-before-each)
- [📜 Playwright `test.afterEach`](https://playwright.dev/docs/api/class-test#test-after-each)
- [📜 Playwright `test.beforeAll`](https://playwright.dev/docs/api/class-test#test-before-all)
- [📜 Playwright `test.afterAll`](https://playwright.dev/docs/api/class-test#test-after-all)
